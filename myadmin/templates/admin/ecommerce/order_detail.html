{% extends 'admin/layouts/base.html' %}
{% block content %}
<div class="container-fluid p-0">
    <div class="mb-3"><h1 class="h3 d-inline align-middle">Order Details</h1><a class="btn btn-primary ms-2" href="{% url 'myadmin:ecommerce:order_update' order.pk %}">Edit</a><a class="btn btn-danger ms-2" href="{% url 'myadmin:ecommerce:order_delete' order.pk %}">Delete</a><a class="btn btn-secondary ms-2" href="{% url 'myadmin:ecommerce:order_list' %}">Back</a></div>
    <div class="row"><div class="col-md-6"><div class="card"><div class="card-header"><h5 class="card-title mb-0">Order Information</h5></div><div class="card-body">
        <dl class="row"><dt class="col-sm-4">Order Number:</dt><dd class="col-sm-8">{{ order.order_number }}</dd><dt class="col-sm-4">Customer:</dt><dd class="col-sm-8">{{ order.user.name }}</dd><dt class="col-sm-4">Status:</dt><dd class="col-sm-8"><span class="badge bg-{% if order.status == 'delivered' %}success{% elif order.status == 'pending' %}warning{% elif order.status == 'cancelled' %}danger{% else %}info{% endif %}">{{ order.get_status_display }}</span></dd><dt class="col-sm-4">Total Amount:</dt><dd class="col-sm-8">₹{{ order.total_amount }}</dd><dt class="col-sm-4">Phone:</dt><dd class="col-sm-8">{{ order.phone }}</dd><dt class="col-sm-4">Email:</dt><dd class="col-sm-8">{{ order.email }}</dd><dt class="col-sm-4">Created:</dt><dd class="col-sm-8">{{ order.created_at|date:"M d, Y H:i" }}</dd></dl>
        <form method="post" action="{% url 'myadmin:ecommerce:order_update_status' order.pk %}" class="mt-3">{% csrf_token %}<div class="input-group"><select class="form-select" name="status">{% for value, label in order.STATUS_CHOICES %}<option value="{{ value }}" {% if order.status == value %}selected{% endif %}>{{ label }}</option>{% endfor %}</select><button type="submit" class="btn btn-primary">Update Status</button></div></form>
    </div></div></div><div class="col-md-6"><div class="card"><div class="card-header"><h5 class="card-title mb-0">Addresses</h5></div><div class="card-body">
        <h6>Shipping Address:</h6><p>{{ order.shipping_address }}</p><h6>Billing Address:</h6><p>{{ order.billing_address }}</p>{% if order.notes %}<h6>Notes:</h6><p>{{ order.notes }}</p>{% endif %}
    </div></div></div></div>
    <div class="row mt-3"><div class="col-12"><div class="card"><div class="card-header"><h5 class="card-title mb-0">Order Items</h5></div><div class="card-body">
        <table class="table"><thead><tr><th>Product</th><th>Store</th><th>Quantity</th><th>Price</th><th>Total</th></tr></thead><tbody>
            {% for item in order.items.all %}<tr><td>{{ item.product.name }}</td><td>{{ item.store.name }}</td><td>{{ item.quantity }}</td><td>₹{{ item.price }}</td><td>₹{{ item.total }}</td></tr>{% empty %}<tr><td colspan="5" class="text-center">No items</td></tr>{% endfor %}
        </tbody></table>
    </div></div></div></div>
</div>
{% endblock %}

