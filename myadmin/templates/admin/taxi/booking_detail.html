{% extends 'admin/layouts/base.html' %}
{% block content %}
<div class="container-fluid p-0">
    <div class="mb-3"><h1 class="h3 d-inline align-middle">Booking Details</h1><a class="btn btn-primary ms-2" href="{% url 'myadmin:taxi:booking_update' booking.pk %}">Edit</a><a class="btn btn-danger ms-2" href="{% url 'myadmin:taxi:booking_delete' booking.pk %}">Delete</a><a class="btn btn-secondary ms-2" href="{% url 'myadmin:taxi:booking_list' %}">Back</a></div>
    <div class="row"><div class="col-md-6"><div class="card"><div class="card-header"><h5 class="card-title mb-0">Booking Information</h5></div><div class="card-body">
        <dl class="row"><dt class="col-sm-4">Customer:</dt><dd class="col-sm-8">{{ booking.customer.name }}</dd><dt class="col-sm-4">Trip:</dt><dd class="col-sm-8">{{ booking.trip }}</dd><dt class="col-sm-4">Seater:</dt><dd class="col-sm-8">{{ booking.seater.seat }}</dd><dt class="col-sm-4">Date:</dt><dd class="col-sm-8">{{ booking.date|date:"M d, Y" }}</dd><dt class="col-sm-4">Time:</dt><dd class="col-sm-8">{{ booking.time|time:"H:i" }}</dd><dt class="col-sm-4">Price:</dt><dd class="col-sm-8">â‚¹{{ booking.price }}</dd><dt class="col-sm-4">Payment Status:</dt><dd class="col-sm-8"><span class="badge bg-{% if booking.payment_status == 'paid' %}success{% elif booking.payment_status == 'pending' %}warning{% else %}danger{% endif %}">{{ booking.get_payment_status_display }}</span></dd><dt class="col-sm-4">Trip Status:</dt><dd class="col-sm-8"><span class="badge bg-{% if booking.trip_status == 'completed' %}success{% elif booking.trip_status == 'pending' %}warning{% elif booking.trip_status == 'cancelled' %}danger{% else %}info{% endif %}">{{ booking.get_trip_status_display }}</span></dd>{% if booking.vehicle %}<dt class="col-sm-4">Vehicle:</dt><dd class="col-sm-8">{{ booking.vehicle.name }} ({{ booking.vehicle.vehicle_no }})</dd>{% endif %}{% if booking.remarks %}<dt class="col-sm-4">Remarks:</dt><dd class="col-sm-8">{{ booking.remarks }}</dd>{% endif %}</dl>
        <form method="post" action="{% url 'myadmin:taxi:booking_update_status' booking.pk %}" class="mt-3">{% csrf_token %}<div class="input-group"><select class="form-select" name="status">{% for value, label in booking.TRIP_STATUS_CHOICES %}<option value="{{ value }}" {% if booking.trip_status == value %}selected{% endif %}>{{ label }}</option>{% endfor %}</select><button type="submit" class="btn btn-primary">Update Status</button></div></form>
    </div></div></div></div>
</div>
{% endblock %}

