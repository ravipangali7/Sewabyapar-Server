{% extends 'website/base.html' %}

{% block title %}KYC Verification - {% if settings %}{{ settings.name }}{% else %}Website{% endif %}{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 lg:py-12">
    <h1 class="text-3xl sm:text-4xl font-bold text-gray-900 mb-6 sm:mb-8">KYC Verification</h1>

    <div class="bg-white rounded-xl shadow-lg p-6 sm:p-8">
        <div class="mb-6 p-4 bg-blue-50 border-l-4 border-blue-500 rounded-lg">
            <p class="text-blue-800 text-sm">
                <strong>Note:</strong> Please provide at least one document (National ID or PAN) for verification. 
                Both are optional, but at least one is required. This helps us ensure the security and authenticity of your account.
            </p>
        </div>

        <form method="post" enctype="multipart/form-data" action="{% url 'website:kyc_submit' %}" class="space-y-6">
            {% csrf_token %}
            <div class="space-y-5">
                <!-- National ID Section -->
                <div class="border-b border-gray-200 pb-6 mb-6">
                    <h3 class="text-lg font-bold text-gray-900 mb-4">National ID (Optional)</h3>
                    <div class="space-y-4">
                        <div>
                            <label for="national_id" class="block text-sm font-semibold text-gray-700 mb-2">
                                National ID Number
                            </label>
                            <input type="text" id="national_id" name="national_id" 
                                value="{{ user.national_id|default:'' }}" 
                                placeholder="Enter your National ID number"
                                class="w-full px-4 py-3.5 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all text-lg">
                            <p class="mt-1 text-sm text-gray-500">Enter your government-issued National ID number</p>
                        </div>

                        <div>
                            <label for="national_id_document" class="block text-sm font-semibold text-gray-700 mb-2">
                                National ID Document
                            </label>
                            {% if user.national_id_document %}
                            <div class="mb-4 p-4 bg-gray-50 rounded-lg">
                                <p class="text-sm text-gray-600 mb-2">Current document:</p>
                                <a href="{{ user.national_id_document.url }}" target="_blank" 
                                    class="text-red-600 hover:text-red-700 font-semibold text-sm">
                                    View Current Document →
                                </a>
                            </div>
                            {% endif %}
                            <input type="file" id="national_id_document" name="national_id_document" 
                                accept="image/jpeg,image/jpg,image/png,image/gif,application/pdf"
                                class="w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-red-50 file:text-red-700 hover:file:bg-red-100">
                            <p class="mt-1 text-sm text-gray-500">
                                Upload a clear image or PDF of your National ID (Max 5MB). 
                                Accepted formats: JPEG, PNG, GIF, PDF
                            </p>
                        </div>
                    </div>
                </div>

                <!-- PAN Section -->
                <div class="border-b border-gray-200 pb-6 mb-6">
                    <h3 class="text-lg font-bold text-gray-900 mb-4">PAN (Permanent Account Number) - Optional</h3>
                    <div class="space-y-4">
                        <div>
                            <label for="pan_no" class="block text-sm font-semibold text-gray-700 mb-2">
                                PAN Number
                            </label>
                            <input type="text" id="pan_no" name="pan_no" 
                                value="{{ user.pan_no|default:'' }}" 
                                placeholder="Enter your PAN number"
                                class="w-full px-4 py-3.5 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all text-lg">
                            <p class="mt-1 text-sm text-gray-500">Enter your PAN (Permanent Account Number)</p>
                        </div>

                        <div>
                            <label for="pan_document" class="block text-sm font-semibold text-gray-700 mb-2">
                                PAN Document
                            </label>
                            {% if user.pan_document %}
                            <div class="mb-4 p-4 bg-gray-50 rounded-lg">
                                <p class="text-sm text-gray-600 mb-2">Current document:</p>
                                <a href="{{ user.pan_document.url }}" target="_blank" 
                                    class="text-red-600 hover:text-red-700 font-semibold text-sm">
                                    View Current Document →
                                </a>
                            </div>
                            {% endif %}
                            <input type="file" id="pan_document" name="pan_document" 
                                accept="image/jpeg,image/jpg,image/png,image/gif,application/pdf"
                                class="w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-red-50 file:text-red-700 hover:file:bg-red-100">
                            <p class="mt-1 text-sm text-gray-500">
                                Upload a clear image or PDF of your PAN document (Max 5MB). 
                                Accepted formats: JPEG, PNG, GIF, PDF
                            </p>
                        </div>
                    </div>
                </div>

                <div class="flex flex-col sm:flex-row gap-4 pt-4">
                    <button type="submit" class="flex-1 bg-red-600 text-white px-6 py-3.5 rounded-xl font-semibold hover:bg-red-700 transition-all shadow-lg hover:shadow-xl min-h-[48px]">
                        Submit for Verification
                    </button>
                    <a href="{% url 'website:kyc_status' %}" class="flex-1 bg-gray-200 text-gray-700 px-6 py-3.5 rounded-xl font-semibold hover:bg-gray-300 transition-all text-center min-h-[48px] flex items-center justify-center">
                        View Status
                    </a>
                    <a href="{% url 'website:profile' %}" class="flex-1 bg-gray-200 text-gray-700 px-6 py-3.5 rounded-xl font-semibold hover:bg-gray-300 transition-all text-center min-h-[48px] flex items-center justify-center">
                        Cancel
                    </a>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}

